import{i,c as R,t as u,a as m,o as A,s as D,b as a,F as G,S as L,r as B}from"./vendor.58064af5.js";const F=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&c(n)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}};F();var H="/assets/TrackdayImola.b71a33e8.png";const q=u('<div><div class="pos"></div><div class="pic"></div><div class="name"></div><div class="score vehicle"></div><div class="score"></div></div>'),T=o=>{const{c:l,lap:s,pos:c}=o;if(!s)return null;let e=new Date(parseInt(s.laptime));return(()=>{const t=q.cloneNode(!0),n=t.firstChild,g=n.nextSibling,h=g.nextSibling,_=h.nextSibling,y=_.nextSibling;return t.className=l,i(n,c),i(h,()=>s.steamProfile.nickname),i(_,()=>s.vehiclename),i(y,()=>`${e.getMinutes()}:${e.getSeconds()}.${e.getMilliseconds()}`),R(()=>g.style.setProperty("backgroundImage",`url(${s.steamProfile.avatar.large})`)),t})()},J=u('<div class="container"><div class="row"><div class="col"><div class="container-fluid text-center"><img alt="Trackday@Imola" class="img-fluid"></div></div></div></div>'),Y=u('<p class="text-center"><b>Yay! You have seen it all</b></p>'),Z=u('<div class="" id="scoreboard"><div class="top3"></div><div class="list" id="infScroll"></div></div>'),j=u('<div class="container"><div class="row"><div class="col-lg-8 offset-lg-2 body mt-2"><div class="blackbox"><div class="text-center"><h1>TROLL SimRacing presents Trackday@Imola! [BETA]</h1><p>GT cars - real time (CET) and weather. Dont be a dick, show respect!<br><a href="https://discord.com/invite/G5a5MJp5Zn">Discord.gg/G5a5MJp5Zn</a> | Have a great trackday!!<br></p></div><div class="container-fluid"><div class="row"><div class="col"><div class="form-group mb-5 pl-5 pr-5 mt-2"><label for="classSelector">Select class</label><select class="form-control" id="classSelector"></select></div></div></div></div></div></div></div></div>'),K=u("<option></option>"),U=u("<div>Loading...</div>"),C=async(o,l)=>(await fetch(`https://api.trollsimracing.no:8080/class/${o}/${l}`)).json(),z=()=>{const o=["GTE","GT1","GT3","GT4"];m([]);const[l,s]=m([]),[c,e]=m(o[0]),[t,n]=m(0),[g,h]=m(!0),[_,y]=m(!1),k=[{value:"GTE",label:"GTE"},{value:"GT1",label:"GT1"},{value:"GT3",label:"GT3"},{value:"GT4",label:"GT4"}];return A(()=>{C(c(),0).then(d=>s(d))}),window.onscroll=function(d){let f=document.body,{y:$,height:b}=f.getBoundingClientRect();Math.ceil(-$+b)>=f.scrollHeight&&!_()&&g()&&(y(!0),C(c(),t()+1).then(p=>{p.length?s(l().concat(p)):h(!1),y(!1)}),n(t()+1))},[(()=>{const d=J.cloneNode(!0),f=d.firstChild,$=f.firstChild,b=$.firstChild,p=b.firstChild;return D(p,"src",H),d})(),(()=>{const d=j.cloneNode(!0),f=d.firstChild,$=f.firstChild,b=$.firstChild,p=b.firstChild,N=p.nextSibling,E=N.firstChild,S=E.firstChild,I=S.firstChild,M=I.firstChild,w=M.nextSibling;return w.addEventListener("change",v=>{e(o[v.currentTarget.selectedIndex]),s([]),C(c(),0).then(r=>{s(r),n(0),h(!0)})}),i(w,a(G,{each:k,children:v=>(()=>{const r=K.cloneNode(!0);return i(r,()=>v.label),r})()})),i(S,a(L,{get when(){return!!l().length},get fallback(){return U.cloneNode(!0)},get children(){const v=Z.cloneNode(!0),r=v.firstChild,x=r.nextSibling;return i(r,a(T,{c:"two item",get lap(){return l()[1]},pos:2}),null),i(r,a(T,{c:"one item",get lap(){return l()[0]},pos:1}),null),i(r,a(T,{c:"three item",get lap(){return l()[2]},pos:3}),null),i(x,a(G,{get each(){return l().slice(3)},children:(P,O)=>a(T,{c:"item",lap:P,get pos(){return O()+3}})}),null),i(x,a(L,{get when(){return!g()},get children(){return Y.cloneNode(!0)}}),null),v}}),null),d})()]};B(()=>a(z,{}),document.getElementById("root"));const Q=o=>document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")===0;Q()||document.body.classList.add("no-webp");
